(this.webpackJsonplastarzi=this.webpackJsonplastarzi||[]).push([[22],{1008:function(e,t){},1265:function(e,t,a){},1384:function(e,t){},1483:function(e,t){},1485:function(e,t){},1509:function(e,t){},1511:function(e,t){},1513:function(e,t){},1539:function(e,t){},1541:function(e,t){},1586:function(e,t){},1588:function(e,t){},1629:function(e){e.exports=JSON.parse("{}")},1720:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var s=a(11),o=a(12),n=a(45),r=a(14),i=a(13),l=a(0),c=a.n(l),d=a(38),g=a.n(d),u=a(983),h=a.n(u),m=(a(1265),a(555));a(1266),a(1629),a(1253);g.a.defaults.baseURL="https://lastarzi2.herokuapp.com";var p=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this,e))._handleKeyDownLogin=function(e){13!==e.which&&13!==e.keyCode||o._isMounted&&o.handleSubmit()},o.state={password:"",mobileNo:"",isLoading:!1,isError:!1,responseData:{},errorMsg:"",status:"",token:"",showPasswordFlag:!0,isSubmit:!1,loginText:"Sign In"},o._isMounted=!1,o.handleSubmit=o.handleSubmit.bind(Object(n.a)(o)),o.showPassword=o.showPassword.bind(Object(n.a)(o)),o.hidePassword=o.hidePassword.bind(Object(n.a)(o)),o.goToForgotPassword=o.goToForgotPassword.bind(Object(n.a)(o)),o.handleChangeUsername=o.handleChangeUsername.bind(Object(n.a)(o)),o.handleChangePassword=o.handleChangePassword.bind(Object(n.a)(o)),o.subscribe=o.subscribe.bind(Object(n.a)(o)),o}return Object(o.a)(a,[{key:"handleChangeUsername",value:function(e){this.setState({mobileNo:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"goToForgotPassword",value:function(){this.props.history.push("/forgotpassword")}},{key:"showPassword",value:function(){this.setState({showPasswordFlag:!0})}},{key:"hidePassword",value:function(){this.setState({showPasswordFlag:!1})}},{key:"subscribe",value:function(e){console.log("###############################start");try{g.a.post("/backendapi/subscribe",{token:localStorage.getItem("fcmtoken"),topic:e}).then((function(e){})),console.log("###############################start1"),console.log("###############################start1",m.apps)}catch(t){console.log("###############################star4",t)}}},{key:"handleSubmit",value:function(e){var t=this;this.setState({errorMsg:""}),this.setState({isSubmit:!0,loginText:"Signing In..."}),""===this.state.mobileNo||""===this.state.password?this.setState({errorMsg:"Invalid Credentials !"}):g.a.post("/backendapi/user/login",{user:this.state.mobileNo.trim(),password:this.state.password.trim()}).then((function(e){if(console.log("Aaquib sss",e),e.data.length>0&&"emailNotConfirmed"!==e.data[0].status){var a=e.data[0];t.setState({errorMsg:"",loggedIn:!0}),console.log("################# login",a.toString()),(o=new Date(a.attendanceDt)).setHours(0,0,0,0),(n=new Date).setHours(0,0,0,0),console.log("################# login",o,n);o.getTime()===n.getTime()&&!0,localStorage.setItem("logInUserData",JSON.stringify(a)),localStorage.setItem("logInGreeting",!0),t.subscribe(a.email),t.props.history.push("/dashboard"),window.location.reload()}else if("emailNotConfirmed"===e.data[0].status){var s=t.props.routerProps.match.params.userkey;if(e.data[0].status===s){var o,n,r=e.data[0];t.setState({errorMsg:"",loggedIn:!0}),console.log("################# login",r.toString()),(o=new Date(r.attendanceDt)).setHours(0,0,0,0),(n=new Date).setHours(0,0,0,0),console.log("################# login",o,n);o.getTime()===n.getTime()&&!0,localStorage.setItem("logInUserData",JSON.stringify(r)),localStorage.setItem("logInGreeting",!0),t.subscribe(r.email),t.props.history.push("/dashboard"),g.a.post("/backendapi/update/login",e.data[0]).then((function(e){})),window.location.reload()}else t.setState({errorMsg:"Please confirm your email for log in !! ",loginText:"Sign In"})}else t.setState({errorMsg:"Inavlid Credentials",loginText:"Sign In"})})).catch((function(e){e.response&&401===e.response.status?t.setState({errorMsg:"Inavlid Credentials",loginText:"Sign In"}):(console.log("Aaquib"),t.setState({errorMsg:"Something went Wrong ! Contact Your admin",loginText:"Sign In"}))}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDownLogin),this._isMounted=!0}},{key:"render",value:function(){var e=this;""!==localStorage.getItem("logInUserData")&&null!==localStorage.getItem("logInUserData")&&(null!==JSON.parse(localStorage.getItem("logInUserData"))&&this.props.history.push("/dashboard"));this.props.isLoading;var t=this.props.isError,a=this.props.status,s=this.props.responseData;return t||200!==a?t&&401===a?s.fault.businessMessage:t&&(200!==a&&401!==a||""===a)&&"Some error occurred. Please try again later !":"",c.a.createElement("div",{className:"test1"},c.a.createElement("div",{className:"login-page"},c.a.createElement("div",{className:"form"},c.a.createElement("form",{className:"register-form"},c.a.createElement("input",{type:"text",placeholder:"name"}),c.a.createElement("input",{type:"password",placeholder:"password"}),c.a.createElement("input",{type:"text",placeholder:"email address"}),c.a.createElement("button",null,"create"),c.a.createElement("p",{className:"message"},"Already registered? ",c.a.createElement("a",{href:"#"},"Sign In"))),c.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},c.a.createElement("img",{src:h.a,className:"logo12"})," ",c.a.createElement("h2",{style:{color:"#2c2c2c",fontWeight:"700"}}," ","Last Arzi")),c.a.createElement("h5",{style:{color:"red"}},this.state.errorMsg),c.a.createElement("div",{className:"login-form"},c.a.createElement("input",{type:"text",name:"user",placeholder:"Username",onChange:this.handleChangeUsername}),c.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleChangePassword}),c.a.createElement("button",{onClick:this.handleSubmit},this.state.loginText),c.a.createElement("p",{className:"message"}," ","Need an account?"," ",c.a.createElement("div",{style:{color:"#4CAF50"},onClick:function(){e.props.history.push("/register")}},"SIGN UP"))))))}}]),a}(l.Component)},983:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAApCAIAAAAu6TfbAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJ/SURBVFhH7ZdN63FREMC9K5KFKGFjqbtQbGRrqSwtyAeQkoWllQ2fQolSvoSFsiHFAiV2ykIpl/L+H3dO13N7Lvdcb/+eHr+NmTnXnTFznDmjPJ/PCo7FYsGyrFqtRvWtgNP9fu92u4kOgAkJh8PE9CmIYw4VsSkUZrOZSL/BtS7xeLxarYJgt9tNJpPRaFQqlZC91WqFDzwPvHC73c5mM1R51xe4rFyIxWJoGQ6HoObz+VwuV6vVcPVVTKdT9AIQE4dIPnq9Xr1ehzjQjg8wDLPb7VSqax3pORwOTqez0WiA3Ol0/H4/2nnXFy7BcPD56Ha7lUoFZYfDAUvH4xHVZ0Av7Xab6MJ8iP++0+mEAibgsTTIQkM+6Uin05lMZr1eE/0uWq12MBhEIhGi34fkRViXcrmMssvlwlVUC4UCqpSMx2P8IoAWeXW5hdyNAlubSFK8vfCUfOMQ8m/GAQ2CSHTQPy8vDjgSiESHXq8nkhTy4shms/AT6RHcdO7y3adC5PWXZDKZSqXo+8toNIpGo0S/Dznf6fpLsVhElZJ39Re40RCJjm9/eZRvHEL+jzj4+7YkVHHwr4PxDgVKrFYrkaSgigPmhmAw6PV6DQYDMdFhs9lYlp3P53BSEdMNJOLgJ5dmswnnLPRbVOmBORmiIcptROZK8Nfv9xOJBMgWi6VUKi2XS+6RB4FTGPpDKBQCWd5cyfeXVxEIBNCLvP6y2WyI9CIkBx/xusCWbLVaOp0Ol54E/mU+nw/vlDBpejwetPOuAZE4YIJlGAZudWh/CRAK7BKNRjOZTODygMY/4xDZHx+DOOa47g/6s+8dXOPA+sGB8QH+Lvp1f/wmCsUPfd5t0k04CEkAAAAASUVORK5CYII="},988:function(e,t){}}]);
//# sourceMappingURL=22.e1208212.chunk.js.map