(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[23],{475:function(e,a,t){},479:function(e,a,t){"use strict";t.d(a,"e",(function(){return m})),t.d(a,"f",(function(){return p})),t.d(a,"d",(function(){return b})),t.d(a,"b",(function(){return g})),t.d(a,"c",(function(){return f})),t.d(a,"a",(function(){return h})),t.d(a,"g",(function(){return v}));var n=t(36),r=t.n(n),l=t(55),o=t(486),c=t(31),i=t.n(c),s=t(471),d=t(32);i.a.defaults.baseURL="https://lastarzi2.herokuapp.com";var u=function(e){var a,t=Object(o.a)(null===e||void 0===e?void 0:e.data);try{for(t.s();!(a=t.n()).done;){var n=a.value;(null===n||void 0===n?void 0:n.spendId)&&(n.spendId=Object(d.a)(null===n||void 0===n?void 0:n.spendId)),(null===n||void 0===n?void 0:n.item)&&(n.item=Object(d.a)(null===n||void 0===n?void 0:n.item)),(null===n||void 0===n?void 0:n.label)&&(n.label=Object(d.a)(null===n||void 0===n?void 0:n.label)),(null===n||void 0===n?void 0:n.amount)&&(n.amount=Object(d.a)(null===n||void 0===n?void 0:n.amount)),(null===n||void 0===n?void 0:n.desc)&&(n.desc=Object(d.a)(null===n||void 0===n?void 0:n.desc))}}catch(r){t.e(r)}finally{t.f()}return e},m=function(e){return function(){var a=Object(l.a)(r.a.mark((function a(t){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("logInUserData")?JSON.parse(localStorage.getItem("logInUserData")):{},a.next=3,i.a.get("/backendapi/nominee/list/"+n._id,{params:e,headers:{Authorization:"Bearer "+localStorage.getItem("authtoken")}}).then((function(a){t({type:"GET_ALL_DATA_LOADING",data:!1});var n,r=Object(o.a)(null===a||void 0===a?void 0:a.data);try{for(r.s();!(n=r.n()).done;){var l=n.value;l.nomineeId=(null===l||void 0===l?void 0:l.nomineeId)&&Object(d.a)(l.nomineeId,!0),l.name=(null===l||void 0===l?void 0:l.name)&&Object(d.a)(l.name,!0),l.relation=(null===l||void 0===l?void 0:l.relation)&&Object(d.a)(l.relation,!0),l.email=(null===l||void 0===l?void 0:l.email)&&Object(d.a)(l.email,!0),l.primaryContact=(null===l||void 0===l?void 0:l.primaryContact)&&Object(d.a)(l.primaryContact,!0),l.secondaryContact=(null===l||void 0===l?void 0:l.secondaryContact)&&Object(d.a)(l.secondaryContact,!0),l.address=(null===l||void 0===l?void 0:l.address)&&Object(d.a)(l.address,!0)}}catch(c){r.e(c)}finally{r.f()}t({type:"GET_DATA",data:a.data,totalPages:a.length,params:e})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},p=function(e){return function(){var a=Object(l.a)(r.a.mark((function a(t){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("logInUserData")?JSON.parse(localStorage.getItem("logInUserData")):{},t({type:"GET_SPEND_DATA_LOADING",data:!0}),a.next=4,i.a.get("/backendapi/spend/list/"+n._id,{params:e,headers:{Authorization:"Bearer "+localStorage.getItem("authtoken")}}).then((function(a){var n;console.log("getSpendData"),t({type:"GET_SPEND_DATA_LOADING",data:!1}),t({type:"GET_DATA",data:null===(n=u(a))||void 0===n?void 0:n.data,totalPages:a.length,params:e})})).catch((function(e){console.log(e),t({type:"GET_SPEND_DATA_LOADING",data:!1})}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},b=function(e){return function(a){return a({type:"FILTER_DATA",value:e})}},g=function(e){return function(a){console.log("DELETE DATA :"),i.a.post("/backendapi/nominee/delete",e,{headers:{Authorization:"Bearer "+localStorage.getItem("authtoken")}}).then((function(t){a({type:"DELETE_DATA",obj:e})}))}},f=function(e){return function(a){console.log("DELETE DATA :"),i.a.post("/backendapi/spend/delete",e,{headers:{Authorization:"Bearer "+localStorage.getItem("authtoken")}}).then((function(t){a({type:"DELETE_DATA",obj:e})}))}},h=function(e){var a={userId:(localStorage.getItem("logInUserData")?JSON.parse(localStorage.getItem("logInUserData")):{})._id,name:Object(d.b)(e.name,!0),relation:Object(d.b)(e.relation,!0),email:Object(d.b)(e.email,!0),primaryContact:Object(d.b)(e.contact1,!0),secondaryContact:Object(d.b)(e.contact2,!0),address:Object(d.b)(e.address,!0),usage:"Unused"};return"others"===e.relation&&e.relation1&&(a.relation=Object(d.b)(e.relation1,!0)),function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/backendapi/nominee/add",a,{headers:{Authorization:"Bearer "+localStorage.getItem("authtoken")}}).then((function(e){s.b.success("Nominee Added Successfully"),t(m())}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},v=function(e){var a=localStorage.getItem("logInUserData")?JSON.parse(localStorage.getItem("logInUserData")):{},t={_id:e._id,usage:e.usage?e.usage:"Unused",userId:a._id,name:Object(d.b)(e.name,!0),relation:Object(d.b)(e.relation,!0),email:Object(d.b)(e.email,!0),primaryContact:Object(d.b)(e.contact1,!0),secondaryContact:Object(d.b)(e.contact2,!0),address:Object(d.b)(e.address,!0)};return"others"===e.relation&&e.relation1&&(t.relation=Object(d.b)(e.relation1,!0)),function(){var e=Object(l.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/backendapi/nominee/update",t,{headers:{Authorization:"Bearer "+localStorage.getItem("authtoken")}}).then((function(e){s.b.success("Nominee Updated Successfully"),a(m())}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}},480:function(e,a,t){},539:function(e,a,t){},668:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(496),o=t(497),c=t(9),i=t(32),s=t(470),d=t(421),u=t(417),m=t(469),p=t(426),b=t(603),g=t(228),f=t(471),h=t(498),v=t.n(h),E=t(5),O=t.n(E),j=t(47),S=t(447),D=t(448),w=t(500),y=t(467),N=t(22),I=t(145),k=t(479),A=(t(474),t(475),t(420)),x=t(422),C=t(393),F=t(104),L=t.n(F),_=t(424),T=t(19),P=function(e){var a=Object(n.useState)("Cigretes"),t=Object(c.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)("other"),s=Object(c.a)(i,2),u=s[0],m=s[1],p=Object(n.useState)(""),b=Object(c.a)(p,2),f=b[0],h=b[1],v=Object(n.useState)(""),E=Object(c.a)(v,2),j=E[0],S=E[1],D=Object(n.useState)(""),w=Object(c.a)(D,2),y=w[0],N=w[1],I=Object(n.useState)(""),k=Object(c.a)(I,2),F=k[0],P=k[1],U=Object(n.useState)(""),z=Object(c.a)(U,2),R=z[0],G=z[1],B=Object(n.useState)(""),J=Object(c.a)(B,2),W=J[0],H=J[1],V=Object(n.useState)(!1),q=Object(c.a)(V,2),M=q[0],Y=q[1],K=function(){P(""),G(""),o(""),m(""),h(""),S(""),N(""),H("")};Object(n.useEffect)((function(){if(e.data){var a=e.data,t=a.id,n=a.name,r=a.relation,l=a.address,c=a.date,i=a.primaryContact,s=a.price;P(t),G(n),o(r),"Cigretes"!==r&&"Drink"!==r&&"Fees"!==r&&"Fuel"!==r&&"Groceries"!==r&&"Party"!==r&&"Rent"!==r&&"Snacks"!==r&&"Travel"!==r&&(o("others"),m(r)),S(l),h(c),N(i),H(s)}e.data&&!M||K(),Y(!1)}),[e.data]);var Q=e.show,X=e.handleSidebar,Z=e.data;return r.a.createElement("div",{className:O()("data-list-sidebar",{show:Q})},r.a.createElement("div",{className:"data-list-sidebar-header mt-2 px-2 d-flex justify-content-between"},r.a.createElement("h4",null,null!==Z?"UPDATE SPEND DETAILS":"ADD NEW SPEND"),r.a.createElement(C.a,{size:20,onClick:function(){X(!1,!0),K()}})),r.a.createElement(L.a,{className:"data-list-fields px-2 pt-2",options:{wheelPropagation:!1}},r.a.createElement(A.a,{className:"form-label-group"},r.a.createElement(d.a,{className:"input-label",type:"text",value:R,placeholder:"Item",onChange:function(e){return G(e.target.value)},id:"data-name"}),r.a.createElement(x.a,{className:"dark"===T.a.theme?"dark-label":"light-label",for:"data-name"},"Item")),r.a.createElement(A.a,null,r.a.createElement(d.a,{type:"select",id:"data-category",value:l,onChange:function(e){return o(e.target.value)}},r.a.createElement("option",null,"Cigretes"),r.a.createElement("option",null,"Drink"),r.a.createElement("option",null,"Fees"),r.a.createElement("option",null,"Fuel"),r.a.createElement("option",null,"Groceries"),r.a.createElement("option",null,"Party"),r.a.createElement("option",null,"Rent"),r.a.createElement("option",null,"Snacks"),r.a.createElement("option",null,"Travel"),r.a.createElement("option",null,"others")),r.a.createElement(x.a,{className:"dark"===T.a.theme?"dark-label select-label":"light-label select-label",for:"data-category"},"Label *")),"others"===l&&r.a.createElement(A.a,null,r.a.createElement(d.a,{className:"input-label",type:"text",value:u,placeholder:"Label Name",onChange:function(e){return u(e.target.value)},id:"data-name"})),r.a.createElement(A.a,{className:"form-label-group"},r.a.createElement(d.a,{className:"input-label",type:"date",value:f,placeholder:"Enter Date",onChange:function(e){return h(e.target.value)},id:"data-name"}),r.a.createElement(x.a,{className:"dark"===T.a.theme?"dark-label":"light-label",for:"data-name"},"Date *")),r.a.createElement(A.a,{className:"form-label-group"},r.a.createElement(d.a,{className:"input-label",type:"number",value:y,onChange:function(e){return N(e.target.value)},id:"data-price",placeholder:"Enter spend amount"}),r.a.createElement(x.a,{for:"data-price",className:"dark"===T.a.theme?"dark-label":"light-label"},"Amount *")),r.a.createElement(A.a,{className:"form-label-group"},r.a.createElement(d.a,{className:"input-label ",style:{height:"115px"},type:"textarea",value:j,placeholder:"Description",onChange:function(e){return S(e.target.value)},id:"data-name"}),r.a.createElement(x.a,{className:"dark"===T.a.theme?"dark-label":"light-label",for:"data-name"},"Description *"))),r.a.createElement("div",{className:"data-list-sidebar-footer px-2 d-flex justify-content-start align-items-center mt-1"},r.a.createElement(g.a.Ripple,{className:"button-label",color:"secondary",outline:!0,onClick:function(){X(!1,!0),K()}},"Cancel"),r.a.createElement(g.a.Ripple,{color:"warning",type:"reset",className:"button-label",onClick:function(){return function(){var a={relation:l,relation1:u,date:f,address:j,contact1:y,_id:F,name:R,price:W};null!==e.data?(a._id=e.data._id,a.usage=e.data.usage,e.updateData(a)):(Y(!0),e.addData(a))}()}},e.isLoading&&r.a.createElement(_.a,{color:"danger",size:"sm"})," ",null!==Z?e.isLoading?"Updating...":"Update":e.isLoading?"Adding...":"Add")))},U=t(31),z=t.n(U);t(539),t(480);z.a.defaults.baseURL="https://lastarzi2.herokuapp.com";var R={rows:{selectedHighlighStyle:{backgroundColor:"rgba(115,103,240,.05)",color:"#7367F0 !important",boxShadow:"0 0 1px 0 #7367F0 !important","&:hover":{transform:"translateY(0px) !important"}}}},G=function(e){return r.a.createElement("div",{className:"data-list-action"},window.screen.width>600?r.a.createElement(S.a,{className:"cursor-pointer mr-1",size:window.screen.width<600?13:20,onClick:function(){return e.currentData(e.row)}}):r.a.createElement(D.a,{className:"cursor-pointer mr-1",size:window.screen.width<600?13:20,onClick:function(){return e.currentData(e.row)}}))},B=function(e){return r.a.createElement("div",{className:"data-list-action"},r.a.createElement(w.a,{style:{cursor:"pointer"},size:window.screen.width<600?13:20,onClick:function(){return e.setRow()}}))},J=function(e){return r.a.createElement("div",{className:"data-list-header d-flex justify-content-between"},r.a.createElement("div",{className:"actions-left d-flex"},r.a.createElement(s.a,{color:"white",className:"sort-dropdown mx-50",style:{height:"75%",backgroundColor:"var(--warning)",fontWeight:"bold"},outline:!0,onClick:function(){return e.handleSidebar(!0,!0)}},r.a.createElement("span",{className:"align-middle"},"Add"))),r.a.createElement("div",{className:"actions-right d-flex"},r.a.createElement("div",{className:"filter-section"},r.a.createElement(d.a,{type:"text",style:{height:"75%",borderRadius:"5rem",fontSize:"1rem"},onChange:function(a){return e.handleFilter(a)},placeholder:"Find",className:"placeholder"}))),r.a.createElement("div",{className:"actions-right d-none"},r.a.createElement(u.a,{className:"data-list-rows-dropdown d-md-block d-none"},r.a.createElement(s.a,{color:"",className:"sort-dropdown",style:{height:"75%"}},r.a.createElement("span",{className:"align-middle mx-50"},"Count : ",e.total)))))},W=Object(N.b)((function(e){var a=e.dataList.data;return a.map((function(e){var a,t=null===e||void 0===e||null===(a=e.date)||void 0===a?void 0:a.split("T");return e.date=null===t||void 0===t?void 0:t[0],e})),{dataList:e.dataList,listLoading:e.dataList.spendLoading,data:a}}),{getSpendData:k.f,deleteSpendData:k.c,updateData:k.g,addData:k.a,filterData:k.d})((function(e){var a=Object(n.useState)([]),t=Object(c.a)(a,2),l=t[0],o=t[1],s=Object(n.useState)(!1),d=Object(c.a)(s,2),u=d[0],h=d[1],E=Object(n.useState)(""),S=Object(c.a)(E,2),D=S[0],w=S[1],N=Object(n.useState)(0),k=Object(c.a)(N,2),A=k[0],x=k[1],C=Object(n.useState)([]),F=Object(c.a)(C,2),L=F[0],_=F[1],T=Object(n.useState)(""),U=Object(c.a)(T,2),W=U[0],H=U[1],V=Object(n.useState)(4),q=Object(c.a)(V,2),M=q[0],Y=q[1],K=Object(n.useState)(!1),Q=Object(c.a)(K,2),X=Q[0],Z=Q[1],$=Object(n.useState)(null),ee=Object(c.a)($,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(0),re=Object(c.a)(ne,2),le=re[0],oe=re[1],ce=Object(n.useState)([]),ie=Object(c.a)(ce,2),se=ie[0],de=ie[1],ue=Object(n.useState)(""),me=Object(c.a)(ue,2),pe=me[0],be=me[1],ge=Object(n.useState)(!1),fe=Object(c.a)(ge,2),he=fe[0],ve=fe[1],Ee=[{name:"Edit",sortable:!0,cell:function(a){return r.a.createElement(G,{row:a,getSpendData:e.getSpendData,parsedFilter:e.parsedFilter,currentData:Se})}},{name:"Item",selector:"item",sortable:!0,minWidth:"200px",cell:function(e){return r.a.createElement("p",{title:e.item,className:"text-truncate text-bold-500 mb-0"},e.item)}},{name:"Description",selector:"desc",minWidth:"150px",sortable:!0},{name:"Label",selector:"label",sortable:!0},{name:"Date",minWidth:"200px",selector:"date",sortable:!0},{name:"Amount",selector:"amount",minWidth:"150px",sortable:!0},{name:"Delete",sortable:!0,cell:function(a){return r.a.createElement(B,{row:a,setRow:function(){w(a),h(!0)},getSpendData:e.getSpendData,parsedFilter:e.parsedFilter})}}],Oe=[{name:"Info",sortable:!0,width:"50px",cell:function(a){return r.a.createElement(G,{row:a,getData:e.getSpendData,parsedFilter:e.parsedFilter,currentData:Se})}},{name:"Item",selector:"item",sortable:!0,minWidth:"50px",cell:function(e){return r.a.createElement("p",{style:{fontSize:"10px"},title:e.item,className:"text-truncate text-bold-500 mb-0"},e.item)}},{name:"Amount",selector:"amount",maxWidth:"50px",sortable:!0,cell:function(e){return r.a.createElement("p",{style:{fontSize:"10px"},title:e.amount,className:"text-truncate text-bold-500 mb-0"},e.amount)}},{name:"Trash",sortable:!0,width:"50px",cell:function(a){return r.a.createElement(B,{row:a,getSpendData:e.getSpendData,parsedFilter:e.parsedFilter,setRow:function(){h(!0),w(a)}})}}];Object(n.useEffect)((function(){var a,t,n,r;(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.length)===l.length&&A===(null===e||void 0===e||null===(t=e.parsedFilter)||void 0===t?void 0:t.page)||(o(null===e||void 0===e?void 0:e.data),_(e.dataList.filteredData),x(parseInt(null===(n=e.parsedFilter)||void 0===n?void 0:n.page)-1),Y(parseInt(null===(r=e.parsedFilter)||void 0===r?void 0:r.perPage)),oe(e.dataList.totalRecords),de(e.dataList.sortIndex))}),[e.data]),Object(n.useEffect)((function(){e.getSpendData(e.parsedFilter)}),[]);var je=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Z(e),!0===a&&(te(null),be(!0))},Se=function(e){e.name=e.item,e.relation1=e.label,e.relation=e.label,e.address=e.desc,e.primaryContact=e.amount,te(e),je(!0)};return e.listLoading?r.a.createElement("div",{className:"fallback-spinner vh-100"},r.a.createElement(I.a,{color:"danger",size:"sm"})):r.a.createElement("div",{className:"data-list ".concat(e.thumbView?"thumb-view":"list-view")}," ",r.a.createElement(m.a,{isOpen:u,className:"modal-dialog-centered",backdrop:"static"},r.a.createElement(p.a,null,"Are you sure you want to delete this record?"),r.a.createElement(b.a,null,r.a.createElement(g.a,{color:"primary",onClick:function(){return h(!1)},className:"button-label"},"Cancel"),r.a.createElement(g.a,{color:"danger",onClick:function(){!function(){if(e.deleteSpendData(D),e.getSpendData(e.parsedFilter),l.length-1===0){var a=e.thumbView?"/data-list/thumb-view/":"/#/spend/list/";j.a.push("".concat(a,"list-view?page=").concat(parseInt(e.parsedFilter.page-1),"&perPage=").concat(e.parsedFilter.perPage)),e.getSpendData({page:e.parsedFilter.page-1,perPage:e.parsedFilter.perPage})}}(),h(!1)},className:"button-label"},"Delete"))),r.a.createElement(v.a,{width:"200",columns:window.screen.width<600?Oe:Ee,data:W.length?L:l,noHeader:!0,subHeader:!0,selectableRows:(window.screen.width,!1),responsive:!0,pointerOnHover:!0,selectableRowsHighlight:!0,customStyles:R,subHeaderComponent:r.a.createElement(J,{handleSidebar:je,handleFilter:function(a){H(a.target.value),e.filterData(a.target.value)},handleRowsPerPage:function(a){var t=e.parsedFilter,n=e.getSpendData,r=void 0!==t.page?t.page:1;j.a.push("/nominee/list?page=".concat(r,"&perPage=").concat(a)),Y(a),n({page:t.page,perPage:a})},rowsPerPage:M,total:le,index:se}),sortIcon:r.a.createElement(y.a,null)}),r.a.createElement(P,{show:X,data:ae,updateData:function(a){if(""===a.name||""===a.relation1||""===a.date||""===a.contact1||""===a.address)f.b.error("Please Fill All Mandatory Details");else{ve(!0),console.log("aaquib",a);var t=localStorage.getItem("logInUserData")?JSON.parse(localStorage.getItem("logInUserData")):{},n={_id:a._id,userId:t._id,item:Object(i.b)(a.name),label:Object(i.b)(a.relation1),date:a.date,amount:Object(i.b)(a.contact1),desc:Object(i.b)(a.address)};z.a.post("/backendapi/spend/update",n,{headers:{Authorization:"Bearer "+localStorage.getItem("authtoken")}}).then((function(a){ve(!1),f.b.success("Spend Updated Successfully"),je(!1,!0),e.getSpendData(e.parsedFilter)})).catch((function(e){ve(!1),f.b.error("Add Nominee Failed! Please contact admin")})),console.log("aaquib",n)}},addData:function(a){if(""===a.name||""===a.relation1&&""===a.relation||""===a.email||""===a.contact1||""===a.address)f.b.error("Please Fill All Mandatory Details");else{ve(!0),console.log("aaquib",a);var t={userId:(localStorage.getItem("logInUserData")?JSON.parse(localStorage.getItem("logInUserData")):{})._id,item:Object(i.b)(a.name),label:Object(i.b)(a.relation1),date:a.date,amount:Object(i.b)(a.contact1),desc:Object(i.b)(a.address)};z.a.post("/backendapi/spend/add",t,{headers:{Authorization:"Bearer "+localStorage.getItem("authtoken")}}).then((function(a){ve(!1),f.b.success("Spend Added Successfully"),je(!1,!0),e.getSpendData(e.parsedFilter)})).catch((function(e){ve(!1),f.b.error("Add Spend Failed! Please contact admin")}))}},isLoading:he,handleSidebar:je,thumbView:e.thumbView,getSpendData:e.getSpendData,dataParams:e.parsedFilter,addNew:pe}),r.a.createElement("div",{className:O()("data-list-overlay",{show:X}),onClick:function(){return je(!1,!0)}}))})),H=t(578),V=t.n(H);a.default=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"warning spacing nodisplay"},"Daily Spends"),r.a.createElement(l.a,null,r.a.createElement(f.a,null),r.a.createElement(o.a,{sm:"12"},r.a.createElement(W,{parsedFilter:V.a.parse((void 0).props.location.search)}))))}}}]);
//# sourceMappingURL=23.231a80fa.chunk.js.map